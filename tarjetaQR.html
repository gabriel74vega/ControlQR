<!DOCTYPE html>
<html>
<head>
<title>AR-24</title>
<meta http-equiv="Permissions-Policy" content="interest-cohort=(), user-id=()" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<style>
  .marginOk{
 	  min-height:95px!important;
    width:93px!important;
    
    /*margin-top: 32px;*/
    margin:1.5rem 0.25rem 1.5rem 0.25rem!important;
    padding:0.25rem;
    }
  img{
    width:300px;
    max-width:300px!important;
    opacity:1;
  }
  div#divCont {
    width: 270px;
    margin:1rem;
    background-image: url(./images/imgAvatar.png);
    background-repeat: no-repeat;
    background-size: cover;
    min-height: 270px;
    max-height: 500px;
    background-position: top center;
  }
</style>
</head>
<body onload="cargaPersona()">

<header class="w3-container w3-blue">
  <h3>Asamblea Regional 2024</h3>
</header>

<div class="w3-card-4 w3-round-large w3-display-middle" style="width:300px;">
  <!-- <img id="imgPerfil" src="" alt="Foto de perfil"> -->
  <div id="divCont" class="w3-circle"></div>
  <div class="w3-container" style="width:300px;">
    <div class="w3-container w3-cell" style="width:200px;padding: 0 1.75rem 0 0;">
      <h4><b>Contabilidad</b></h4>
      <p><b id="fullName"></b></p>
      <p id="asign"></p>
      <p id="turno"><b>Turno:</b></p>
    </div>
    <div id="color" class="w3-container w3-green w3-cell" style="width:100px;padding: 0.25rem 1.075rem 0.25rem 1.075rem;border-bottom-right-radius: 8px;">
    	<div class="w3-panel marginOk w3-border w3-round-large">
    	<i id="check" class="material-icons" style="font-size:83px;line-height: 1.4!important">check_circle</i>
  </div>
    </div>
  </div>
</div>
<script>
   //const AS_URL_BASE = "https://script.google.com/macros/s/AKfycbwTtVJf9aFfjyiFGnzYJNv1bsq-Prg3lZR5ifFyhgf4C8UN7vCDyPlo6KqIx0QM0GQ9uQ/exec";
    
   //var url = document.location.href;
   //console.log("url: "+url);
   //var k = url.substr(url.lastIndexOf("k=")+2);
  function cargaPersona(){
    const valores = window.location.search;

    //Mostramos los valores en consola:
    //console.log("valores: "+valores);

    //Resultado:
    //producto=camiseta&color=azul&talla=s
    
    //Creamos la instancia
    const urlParams = new URLSearchParams(valores);

    //Accedemos a los valores
    //var image = urlParams.get('image');
    //Verificar si existe el parámetro
    //console.log("image: "+urlParams.has('image'));
    var boolImage = urlParams.has('image');
    var boolId = urlParams.has('k');
    var id = urlParams.get('k');
    //const persona = {
    if(boolId && (id!="" && id!=0)){  
      if(boolImage){
        //Accedemos a los valores
        var image = urlParams.get('image');
      }else{
        var image = "imgAvatar";
      }
      var fullName = urlParams.get('apellido') + ", " + urlParams.get('nombre');
      var asign = urlParams.get('asign');
      var turno = urlParams.get('turno');
      var pathImage = "./images/" + image + ".jpg";
      /*document.getElementById("imgPerfil").src = pathImage;*/
      document.getElementById("divCont").setAttribute("style","background-image: url(" + pathImage + ");");
      document.getElementById("fullName").innerHTML = fullName;
      document.getElementById("asign").innerHTML = "<b>Asignación:</b> " + asign;
      document.getElementById("turno").innerHTML = "<b>Turno:</b> " + turno;
    }else{
      /* document.getElementById("imgPerfil").src = "./images/imgAvatar.png";*/arguments
      document.getElementById("divCont").setAttribute("style","background-image: url('./images/imgAvatar.png');");
      document.getElementById("fullName").innerHTML = "<i>¡Persona no registrada!</i>";
      document.getElementById("fullName").setAttribute("class","w3-text-red");
      document.getElementById("fullName").setAttribute("style","margin: 0 2.2rem 0 0;");
      document.getElementById("asign").innerHTML = "";
      document.getElementById("turno").innerHTML = "";
      document.getElementById("check").innerHTML = "cancel";
      document.getElementById("color").setAttribute("class", "w3-container w3-cell w3-red");
    }
  }
 
  //Puedes recorrer los valores, claves y pares completos.
  /*const
  keys = urlParams.keys(),
  values = urlParams.values(),
  entries = urlParams.entries();

  for (const value of values) console.log(value);*/
  
</script>
</body>
</html>